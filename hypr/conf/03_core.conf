# ~/.config/hypr/conf/03_core.conf
#
# Hyprland Core Configuration
# (Appearance, Animations, Layouts, etc.)
# See https://wiki.hyprland.org/Configuring/Variables/
# -----------------------------------------------------

# --- 通用设置 (General) ---
general {
    gaps_in = 5                     # 窗口之间的缝隙大小
    gaps_out = 10                   # 窗口与屏幕边缘的缝隙大小
    border_size = 2                 # 窗口边框大小
    
    # IMPORTANT: 颜色变量 ($mauve, $surface0) 将在 themes/catppuccin.conf 中定义
    # 第一次加载时会报错, 属于正常现象, 等我们配置完主题文件就好了
    col.active_border = rgba(00000000) $mauve 45deg # 激活窗口的边框颜色 (透明到主题色的渐变)
    col.inactive_border = $surface0   # 非激活窗口的边框颜色

    layout = dwindle                # 默认布局: Dwindle (一种灵活的二叉树平铺)
    allow_tearing = false
}

# --- 装饰 (Decorations) ---
decoration {
    rounding = 10
    
    # --- 新的窗口阴影设置 ---
    shadow {
        enabled = yes              # 对应之前的 drop_shadow = yes
        range = 4                  # 你的 shadow_range 设置
        render_power = 3           # 你的 shadow_render_power 设置
        color = rgba(1a1a1aee)     # 对应之前的 col.shadow
    }

    # 背景模糊 (你这部分是正确的)
    blur {
        enabled = yes
        size = 6
        passes = 3
        new_optimizations = on
        xray = true
        noise = 0.0117
    }
}
# --- 动画 (Animations) ---
animations {
    enabled = yes

    # 动画曲线 (Bezier Curves) - 定义动画的“缓动函数”
    # 你可以在 https://cubic-bezier.com/ 网站上自定义
    bezier = wind, 0.05, 0.9, 0.1, 1.05
    bezier = winIn, 0.1, 1.05, 0.1, 1
    bezier = winOut, 0.3, -0.05, 0.7, 0.05
    bezier = liner, 1, 1, 1, 1
    
    # 将动画效果应用到具体操作
    animation = windows, 1, 6, wind, slide
    animation = windowsIn, 1, 5, winIn
    animation = windowsOut, 1, 5, winOut, popin
    animation = border, 1, 10, liner
    animation = borderangle, 1, 8, liner
    animation = fade, 1, 7, default
    animation = workspaces, 1, 5, default, slide
}

# --- 布局 (Layouts) ---
dwindle {
    pseudotile = yes               # 启用伪类, 允许一个窗口占据主区域, 其他窗口堆叠
    preserve_split = yes            # 在 Dwindle 布局中保留窗口分割比例
}

master {
   new_on_top = true
}

# --- 手势 (Gestures) ---
gesture = 3, horizontal, workspace

# --- 杂项 (Miscellaneous) ---
misc {
    # 禁用 Hyprland 的内置壁纸渲染器, 因为我们使用 swww
    force_default_wallpaper = 0
}
